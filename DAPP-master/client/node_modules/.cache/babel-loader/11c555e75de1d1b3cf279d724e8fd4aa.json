{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ASUS\\\\Downloads\\\\DAPP-master-dup\\\\DAPP-master\\\\client\\\\src\\\\App.js\";\nimport React, { useReducer, useEffect } from 'react';\nimport Context from './store/Context.js';\nimport InitialeState from './store/InitialeState.js';\nimport Reducer from './store/Reducer.js';\nimport ipfs from './components/Ipfs.js';\nimport AddDocument from './components/AddDocument.js';\nimport GenerateKeyPair from './components/GenerateKeyPair.js';\nimport GetDocument from './components/GetDocument.js';\nimport Notif from './components/Notif.js';\nimport SimpleStorage from './contracts/SimpleStorage.json';\nimport GetWeb3 from './utils/GetWeb3.js';\n\nfunction App() {\n  // use the reducer hook\n  const [state, dispatch] = useReducer(Reducer, InitialeState);\n  useEffect(() => {\n    const init = async () => {\n      // get web3 instance\n      const web3 = await GetWeb3(); // get accounts      \n\n      const accounts = await web3.eth.getAccounts(); // get the contract instance from the blockchain\n\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = SimpleStorage.networks[networkId];\n      const contract = new web3.eth.Contract(SimpleStorage.abi, deployedNetwork && deployedNetwork.address); // set the web3 instance to a global variable\n\n      dispatch({\n        type: 'SET_WEB3',\n        payload: web3\n      }); // set accounts to a global variable\n\n      dispatch({\n        type: 'SET_ACCOUNTS',\n        payload: accounts\n      }); // set the contract instance to a global variable\n\n      dispatch({\n        type: 'SET_CONTRACT',\n        payload: contract\n      });\n    }; // launch the init function\n\n\n    init(); // if the account of metamask change, the accounts will be updated\n\n    window.ethereum.on('accountsChanged', accounts => {\n      dispatch({\n        type: 'SET_CONTRACT',\n        payload: accounts\n      });\n    });\n  }, []); // the app will be started if the state is not null\n\n  if (state && !state.loading) {\n    return (\n      /*#__PURE__*/\n      // Provide state and dispatch function to the components of the app\n      React.createElement(Context.Provider, {\n        value: {\n          state,\n          dispatch\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"br\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 14\n        }\n      }), state.msg && /*#__PURE__*/React.createElement(Notif, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 23\n        }\n      }), /*#__PURE__*/React.createElement(AddDocument, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(GetDocument, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(\"hr\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 9\n        }\n      }), /*#__PURE__*/React.createElement(GenerateKeyPair, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 9\n        }\n      }))\n    );\n  } else {\n    // if the state in null, the app shows loading message\n    return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 7\n      }\n    }), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 12\n      }\n    }), /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 7\n      }\n    }, \"Loading...\"));\n  }\n}\n\nexport default App;","map":{"version":3,"sources":["C:/Users/ASUS/Downloads/DAPP-master-dup/DAPP-master/client/src/App.js"],"names":["React","useReducer","useEffect","Context","InitialeState","Reducer","ipfs","AddDocument","GenerateKeyPair","GetDocument","Notif","SimpleStorage","GetWeb3","App","state","dispatch","init","web3","accounts","eth","getAccounts","networkId","net","getId","deployedNetwork","networks","contract","Contract","abi","address","type","payload","window","ethereum","on","loading","msg"],"mappings":"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","sourcesContent":["import React, {useReducer, useEffect} from 'react';\nimport Context from './store/Context.js';\nimport InitialeState from './store/InitialeState.js';\nimport Reducer from './store/Reducer.js';\nimport ipfs from './components/Ipfs.js';\nimport AddDocument from './components/AddDocument.js';\nimport GenerateKeyPair from './components/GenerateKeyPair.js';\nimport GetDocument from './components/GetDocument.js';\nimport Notif from './components/Notif.js';\nimport SimpleStorage from './contracts/SimpleStorage.json';\nimport GetWeb3 from './utils/GetWeb3.js';\n\nfunction App() {\n  // use the reducer hook\n  const [state, dispatch] = useReducer(Reducer, InitialeState);\n\n  useEffect(() => {\n    \n    const init = async () => {\n      // get web3 instance\n      const web3 = await GetWeb3();\n      \n      // get accounts      \n      const accounts = await web3.eth.getAccounts();\n\n      // get the contract instance from the blockchain\n      const networkId = await web3.eth.net.getId();\n      const deployedNetwork = SimpleStorage.networks[networkId];      \n      const contract = new web3.eth.Contract(\n        SimpleStorage.abi,\n        deployedNetwork && deployedNetwork.address,\n      );\n      \n      // set the web3 instance to a global variable\n      dispatch({type: 'SET_WEB3', payload: web3});\n\n      // set accounts to a global variable\n      dispatch({type: 'SET_ACCOUNTS', payload: accounts});\n      \n      // set the contract instance to a global variable\n      dispatch({type: 'SET_CONTRACT', payload: contract});\n    }\n\n    // launch the init function\n    init();\n\n    // if the account of metamask change, the accounts will be updated\n    window.ethereum.on('accountsChanged', accounts => {\n      dispatch({type: 'SET_CONTRACT', payload: accounts});\n    });\n  }, []);\n\n  // the app will be started if the state is not null\n  if(state && !state.loading) {\n    return (\n      // Provide state and dispatch function to the components of the app\n      <Context.Provider value={{state, dispatch}}>\n        <br/><br/>\n         \n        {state.msg && <Notif />}\n\n         \n        <AddDocument />\n        <hr/>\n\n         \n        <GetDocument />\n        <hr/>\n\n         \n        <GenerateKeyPair/>\n      </Context.Provider>\n      \n    );\n  } else {\n    // if the state in null, the app shows loading message\n    return (\n      <>\n      <br/><br/>\n      <h2>Loading...</h2>\n      </>\n    )\n  }\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}