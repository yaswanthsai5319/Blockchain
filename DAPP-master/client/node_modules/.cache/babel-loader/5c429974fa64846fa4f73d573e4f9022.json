{"ast":null,"code":"// import React, {useState, useContext} from 'react';\n// import Ipfs from './Ipfs';\n// import NodeRSA from 'node-rsa';\n// import Context from '../store/Context';\n// import { useNavigate } from 'react-router-dom';\n// import Axios from 'axios';\n// const AddDocument = () => {\n//   const navigate=useNavigate()\n//   const {state, dispatch} = useContext(Context);\n//   const [buffer, setBuffer] = useState();\n//   const [publicKey, setPublicKey] = useState();\n//   const [privateKey,setPrivateKey]=useState();\n//   const [username,setUsername]=useState();\n//   const [ext,setExt]=useState(\"\");\n//   const handleFileChange = e => {\n//     const file = e.target.files[0];\n//     console.log(file);\n//     setExt(file.name.split('.').pop())\n//     console.log(file);\n//     const reader = new window.FileReader();\n//     console.log(\"reader\");\n//     reader.readAsArrayBuffer(file);\n//     console.log();\n//     reader.onloadend = () => {\n//       setBuffer(Buffer(reader.result));\n//       console.log(reader.result);\n//     }\n//     console.log(\"final\");\n//   }\n//   const handleKeyChange = e => {\n//     setPublicKey(e.target.value);\n//   }\n//   const handlePKeyChange = e => {\n//     setPrivateKey(e.target.value);\n//   }\n//   const handleUserName = e =>{\n//     setUsername(e.target.value);\n//   }\n//   const handleSubmit = async e => {\n//     e.preventDefault();\n//     try {\n//       dispatch({type: 'SET_LOADING', payload: true});\n//       const key = new NodeRSA(publicKey);\n//       console.log(key);\n//       console.log(\"buffer\",buffer);\n//       const encrypt = key.encrypt(buffer);\n//       console.log(encrypt)\n//       let filePath=\"\";\n//       for await (const result of Ipfs.add(encrypt)) {\n//         await state.contract.methods\n//           .set(result.path)\n//           .send({from: state.accounts[0]});\n//         console.log(\"final-2\");\n//         filePath = result.path;\n//         dispatch({type: 'SET_PATH', payload: result.path});\n//         dispatch({\n//           type: 'SET_NOTIF',\n//           payload: {msg: result.path, success: true}\n//         });\n//       }\n//       //ikkada manam post cheyali data ni\n//       console.log(filePath);\n//       console.log(privateKey)\n//       // Axios.post(\"http://localhost:3001/post\",{\n//       //   username:username,\n//       //   key:privateKey,\n//       //   path: filePath,\n//       //  })\n//       //  .then((res)=>{\n//       //   console.log(res);\n//       //   if(res.data==username)\n//       //   {\n//       //     console.log(\"Data sent\");\n//       //   }\n//       //   else{\n//       //   alert(res.data.message);\n//       //   }\n//       //  })\n//       Axios.post(\"http://localhost:3001/post\",{\n//   username: username,\n//   path: filePath,\n//   pkey: privateKey,\n//   exxt:ext,\n// })\n// .then((res)=>{\n//   console.log(res);\n//   if(res.data==username) {\n//     console.log(\"Data sent\");\n//   } else {\n//     alert(res.data.message);\n//   }\n// });\n//     } catch (error) {\n//       dispatch({\n//         type: 'SET_NOTIF',\n//         payload: {msg: error.message, success: false}\n//       });\n//     } finally {\n//       dispatch({type: 'SET_LOADING', payload: false});\n//     }\n//   }\n//   return (\n//     <>\n//     <h2>SEND</h2>\n//     <form onSubmit={handleSubmit}>\n//       <label>File</label>\n//       <input\n//         className='u-full-width'\n//         type='file'\n//         onChange={handleFileChange}\n//         required />\n//         <label>Username</label>\n//       <input\n//         className='u-full-width'\n//         type='text'\n//         onChange={handleUserName}\n//         required />\n//       <label>Public Key</label>\n//       <input\n//         className='u-full-width'\n//         type='text'\n//         onChange={handleKeyChange}\n//         required />\n//         <label>Private Key</label>\n//       <input\n//         className='u-full-width'\n//         type='text'\n//         onChange={handlePKeyChange}\n//         required />\n//       <button\n//         className='u-full-width button-primary'\n//         type='submit'>\n//         submit\n//       </button>\n//     </form>\n//     </>\n//   )\n// }\n// export default AddDocument;","map":{"version":3,"sources":["C:/Users/ASUS/Desktop/DAPP-master-dup/DAPP-master/client/src/components/AddDocument.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA","sourcesContent":["// import React, {useState, useContext} from 'react';\n// import Ipfs from './Ipfs';\n// import NodeRSA from 'node-rsa';\n// import Context from '../store/Context';\n// import { useNavigate } from 'react-router-dom';\n// import Axios from 'axios';\n// const AddDocument = () => {\n//   const navigate=useNavigate()\n//   const {state, dispatch} = useContext(Context);\n\n//   const [buffer, setBuffer] = useState();\n//   const [publicKey, setPublicKey] = useState();\n//   const [privateKey,setPrivateKey]=useState();\n//   const [username,setUsername]=useState();\n//   const [ext,setExt]=useState(\"\");\n//   const handleFileChange = e => {\n//     const file = e.target.files[0];\n//     console.log(file);\n//     setExt(file.name.split('.').pop())\n//     console.log(file);\n//     const reader = new window.FileReader();\n//     console.log(\"reader\");\n//     reader.readAsArrayBuffer(file);\n//     console.log();\n    \n//     reader.onloadend = () => {\n//       setBuffer(Buffer(reader.result));\n//       console.log(reader.result);\n//     }\n\n//     console.log(\"final\");\n//   }\n\n//   const handleKeyChange = e => {\n//     setPublicKey(e.target.value);\n//   }\n\n//   const handlePKeyChange = e => {\n//     setPrivateKey(e.target.value);\n//   }\n\n//   const handleUserName = e =>{\n//     setUsername(e.target.value);\n//   }\n//   const handleSubmit = async e => {\n//     e.preventDefault();\n//     try {\n//       dispatch({type: 'SET_LOADING', payload: true});\n//       const key = new NodeRSA(publicKey);\n//       console.log(key);\n//       console.log(\"buffer\",buffer);\n//       const encrypt = key.encrypt(buffer);\n//       console.log(encrypt)\n//       let filePath=\"\";\n//       for await (const result of Ipfs.add(encrypt)) {\n//         await state.contract.methods\n//           .set(result.path)\n//           .send({from: state.accounts[0]});\n//         console.log(\"final-2\");\n//         filePath = result.path;\n//         dispatch({type: 'SET_PATH', payload: result.path});\n//         dispatch({\n//           type: 'SET_NOTIF',\n//           payload: {msg: result.path, success: true}\n//         });\n//       }\n//       //ikkada manam post cheyali data ni\n//       console.log(filePath);\n//       console.log(privateKey)\n//       // Axios.post(\"http://localhost:3001/post\",{\n//       //   username:username,\n//       //   key:privateKey,\n//       //   path: filePath,\n//       //  })\n//       //  .then((res)=>{\n//       //   console.log(res);\n//       //   if(res.data==username)\n//       //   {\n//       //     console.log(\"Data sent\");\n//       //   }\n//       //   else{\n//       //   alert(res.data.message);\n//       //   }\n//       //  })\n//       Axios.post(\"http://localhost:3001/post\",{\n//   username: username,\n  \n//   path: filePath,\n//   pkey: privateKey,\n//   exxt:ext,\n// })\n// .then((res)=>{\n//   console.log(res);\n//   if(res.data==username) {\n//     console.log(\"Data sent\");\n//   } else {\n//     alert(res.data.message);\n//   }\n// });\n//     } catch (error) {\n//       dispatch({\n//         type: 'SET_NOTIF',\n//         payload: {msg: error.message, success: false}\n//       });\n//     } finally {\n//       dispatch({type: 'SET_LOADING', payload: false});\n//     }\n//   }\n\n  \n//   return (\n//     <>\n//     <h2>SEND</h2>\n//     <form onSubmit={handleSubmit}>\n//       <label>File</label>\n//       <input\n//         className='u-full-width'\n//         type='file'\n//         onChange={handleFileChange}\n//         required />\n//         <label>Username</label>\n//       <input\n//         className='u-full-width'\n//         type='text'\n//         onChange={handleUserName}\n//         required />\n//       <label>Public Key</label>\n//       <input\n//         className='u-full-width'\n//         type='text'\n//         onChange={handleKeyChange}\n//         required />\n//         <label>Private Key</label>\n//       <input\n//         className='u-full-width'\n//         type='text'\n//         onChange={handlePKeyChange}\n//         required />\n//       <button\n//         className='u-full-width button-primary'\n//         type='submit'>\n//         submit\n//       </button>\n      \n//     </form>\n//     </>\n//   )\n// }\n\n// export default AddDocument;\n\n\n"]},"metadata":{},"sourceType":"module"}